@model WebChef.Models.Passo[]

@{
    ViewData["Title"] = "ConfecionaReceita";
}

<!DOCTYPE HTML>
@if (@ViewBag.duracao != null)
{
    <html>

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            p {
                text-align: center;
                font-size: 60px;
                margin-top: 0px;
            }
        </style>
    </head>
    <body>

        <p id="demo"></p>

        <script>
            var countDownDate = @ViewBag.duracao;
            var hours = Math.floor((countDownDate % (60 * 60 * 24)) / (60 * 60));
            var minutes = Math.floor((countDownDate % (60 * 60)) / (60));
            var seconds = Math.floor((countDownDate % 60));
            document.getElementById("demo").innerHTML = hours + ":" + minutes + ":" + seconds;
            var y = 0;
            var x;

            function startTime() {


                // Atualizador o contador a cada segundo
                x = setInterval(function () {
                    hours = Math.floor((countDownDate % (60 * 60 * 24)) / (60 * 60));
                    minutes = Math.floor((countDownDate % (60 * 60)) / (60));
                    seconds = Math.floor((countDownDate % 60));
                    // O output é um valor com o id "demo"
                    document.getElementById("demo").innerHTML = hours + ":" + minutes + ":" + seconds;

                    // Quando o temporizador acaba escreve Terminou!
                    if (countDownDate < 0) {
                        clearInterval(x);
                        document.getElementById("demo").innerHTML = "Terminou!";
                    } else countDownDate--
                }, 1000);

            }

            /**/</script>
        <div class="col text-center">
            <button class="btn btn-primary" onclick="startTime()">Start</button>
            <button class="btn btn-primary" onclick="clearInterval(x)">Stop</button>
        </div>


    </body>
</html>
}

<h1>@Model[@ViewBag.passo - 1].descricao</h1>


<h2>@Model[@ViewBag.passo - 1].Acao.descricao</h2>

<dd class="col-sm-10">
    <a href=@ViewBag.link>Link do passo</a>

</dd>



@if (@ViewBag.passo > 1)
{
    <a asp-controller="ReceitaView" asp-action="ConfecionaReceita" asp-route-id=@ViewBag.id asp-route-passo=@ViewBag.anterior class="btn btn-secondary">
        Anterior
    </a>
}

@if (@ViewBag.passo + 1 <= @ViewBag.tamanho)
{
    <a asp-controller="ReceitaView" asp-action="ConfecionaReceita" asp-route-id=@ViewBag.id asp-route-passo=@ViewBag.seguinte class="btn btn-secondary">
        Seguinte
    </a>
}

@foreach (var ing in @Model[@ViewBag.passo - 1].ingredientes)
{
    <figure class="img">
        <img class="figure-img img-fluid rounded" src=@Url.Content(ing.imagem) style="width: 150px; height: 150px;">
        <figcaption class="figure-caption">@ing.designacao (@ing.quantidade)</figcaption>
    </figure>

}
